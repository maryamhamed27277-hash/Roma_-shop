<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Roma Shop - متابعات إنستجرام</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
  <style>
    /* نفس الاستايل اللي عندك */
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Tajawal',sans-serif}
    :root{--primary:#8A2BE2;--primary-dark:#6A0DAD;--secondary:#FF6B8B;--secondary-dark:#E84565;--accent:#00D4FF;--light:#F8F9FA;--dark:#1A1A2E;--success:#00C9A7;--warning:#FFC75F;--danger:#FF8066}
    body{background:linear-gradient(135deg,var(--dark) 0%,#16213E 100%);color:var(--light);min-height:100vh;line-height:1.6}
    .container{max-width:1200px;margin:0 auto;padding:0 20px}
    header{display:flex;justify-content:space-between;align-items:center;padding:20px 0;border-bottom:1px solid rgba(255,255,255,0.1)}
    .logo{font-size:28px;font-weight:800;background:linear-gradient(45deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    nav ul{display:flex;list-style:none;gap:20px}
    nav a{color:var(--light);text-decoration:none;padding:10px 20px;border-radius:25px;transition:.3s}
    nav a:hover{background:var(--primary)}
    .hero{text-align:center;padding:80px 0}
    .hero h1{font-size:3.5rem;margin-bottom:20px;background:linear-gradient(to right,var(--accent),var(--secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .btn{background:linear-gradient(45deg,var(--primary),var(--secondary));color:#fff;padding:15px 35px;border:none;border-radius:30px;font-size:18px;font-weight:bold;cursor:pointer;transition:.3s;text-decoration:none;display:inline-block}
    .btn:hover{transform:translateY(-3px);box-shadow:0 10px 25px rgba(138,43,226,.4)}
    .features{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:30px;margin:80px 0}
    .feature-card{background:rgba(255,255,255,.08);padding:30px;border-radius:20px;text-align:center;border:1px solid rgba(255,255,255,.12);backdrop-filter:blur(10px)}
    .feature-card i{font-size:50px;margin-bottom:20px;background:linear-gradient(45deg,var(--accent),var(--secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .packages{margin:80px 0}
    .section-title{text-align:center;font-size:2.5rem;margin-bottom:50px}
    .package-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:30px}
    .package-card{background:rgba(255,255,255,.08);padding:30px;border-radius:20px;text-align:center;border:1px solid rgba(255,255,255,.12);backdrop-filter:blur(10px);transition:.4s}
    .package-card:hover{transform:translateY(-10px)}
    .package-amount{font-size:3rem;font-weight:800;background:linear-gradient(45deg,var(--accent),var(--secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:10px}
    .package-price{font-size:2.2rem;font-weight:700;margin:20px 0}
    .page{display:none}
    .active{display:block}
    .login-form,.payment-page{background:rgba(255,255,255,.08);padding:40px;border-radius:20px;max-width:500px;margin:50px auto;border:1px solid rgba(255,255,255,.12);backdrop-filter:blur(10px)}
    .form-group{margin-bottom:20px}
    .form-control{width:100%;padding:15px;border-radius:12px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.05);color:#fff;font-size:16px}
    .form-control::placeholder{color:rgba(255,255,255,.5)}
    .order-item{background:rgba(255,255,255,.05);padding:20px;margin-bottom:15px;border-radius:15px;border:1px solid rgba(255,255,255,.1)}
    .status-pending{background:rgba(255,199,95,.2);color:var(--warning);padding:5px 15px;border-radius:20px;font-size:14px;display:inline-block}
    .status-completed{background:rgba(0,201,167,.2);color:var(--success);padding:5px 15px;border-radius:20px;font-size:14px;display:inline-block}
  </style>
</head>
<body>
  <div class="container">
    <!-- الصفحة الرئيسية -->
    <div id="homePage" class="page active">
      <header>
        <div class="logo"><i class="fas fa-crown"></i> Roma Shop</div>
        <nav>
          <ul>
            <li><a href="#" onclick="showPage('homePage')">الرئيسية</a></li>
            <li><a href="#" onclick="showPage('ordersPage')">طلباتي</a></li>
            <li><a href="#" id="loginNav" onclick="showPage('loginPage')">تسجيل الدخول</a></li>
            <li><a href="#" id="logoutNav" style="display:none;" onclick="logoutUser()">تسجيل الخروج</a></li>
          </ul>
        </nav>
      </header>

      <section class="hero">
        <h1>مصدرك الموثوق لزيادة المتابعين</h1>
        <p style="font-size:1.2rem;margin-bottom:30px;opacity:.9;">احصل على متابعين حقيقيين ونشطين لحساب إنستجرامك بأفضل الأسعار</p>
        <a href="#packages" class="btn"><i class="fas fa-shopping-cart"></i> ابدأ الآن</a>
      </section>

      <!-- الباقات -->
      <section class="packages" id="packages">
        <h2 class="section-title">اختر الباقة المناسبة</h2>
        <div class="package-grid">
          <div class="package-card">
            <div class="package-amount">50</div><div>متابع إنستجرام</div>
            <div class="package-price">10 جنيه</div>
            <button class="btn" onclick="selectPackage(50,10)">اختر الباقة</button>
          </div>
          <div class="package-card">
            <div class="package-amount">100</div><div>متابع إنستجرام</div>
            <div class="package-price">20 جنيه</div>
            <button class="btn" onclick="selectPackage(100,20)">اختر الباقة</button>
          </div>
        </div>
      </section>
    </div>

    <!-- صفحة تسجيل الدخول -->
    <div id="loginPage" class="page">
      <header>
        <div class="logo"><i class="fas fa-crown"></i> Roma Shop</div>
      </header>
      <div class="login-form">
        <h2 style="text-align:center;margin-bottom:30px;">تسجيل الدخول</h2>
        <div class="form-group"><input type="email" id="loginEmail" class="form-control" placeholder="البريد الإلكتروني"></div>
        <div class="form-group"><input type="password" id="loginPassword" class="form-control" placeholder="كلمة المرور"></div>
        <button class="btn" style="width:100%;" onclick="loginUser()">تسجيل الدخول</button>
      </div>
    </div>

    <!-- الطلبات -->
    <div id="ordersPage" class="page">
      <header>
        <div class="logo"><i class="fas fa-crown"></i> Roma Shop</div>
      </header>
      <h2 class="section-title">طلباتي</h2>
      <div id="ordersList"></div>
    </div>

    <!-- الدفع -->
    <div id="paymentPage" class="page">
      <header><div class="logo"><i class="fas fa-crown"></i> Roma Shop</div></header>
      <div class="payment-page">
        <h2 style="text-align:center;margin-bottom:30px;">إتمام الطلب</h2>
        <p id="selectedPackageInfo">باقة 100 متابع - 20 جنيه</p>
        <div class="form-group"><input type="text" id="username" class="form-control" placeholder="اسم المستخدم"></div>
        <div class="form-group"><input type="tel" id="phone" class="form-control" placeholder="رقم الهاتف"></div>
        <div class="form-group"><input type="file" id="receipt" class="form-control"></div>
        <button class="btn" style="width:100%;" onclick="submitOrder()">تأكيد الطلب</button>
      </div>
    </div>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey:"AIzaSyA-Pi_g3EUeSgOeVii_OqodpDguMMyPknY",
      authDomain:"romalshop.firebaseapp.com",
      projectId:"romalshop",
      storageBucket:"romalshop.firebasestorage.app",
      messagingSenderId:"830369715807",
      appId:"1:830369715807:web:fbfde9ded9daac6eb46dea"
    };
    firebase.initializeApp(firebaseConfig);
    const db=firebase.firestore();
    const auth=firebase.auth();

    let selectedPackage={amount:0,price:0};

    function showPage(pageId){
      document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
      document.getElementById(pageId).classList.add('active');
      if(pageId==='ordersPage'){loadOrders();}
    }

    function selectPackage(amount,price){
      if(!auth.currentUser){alert("سجل دخول الأول!");showPage('loginPage');return;}
      selectedPackage={amount,price};
      document.getElementById('selectedPackageInfo').textContent=`باقة ${amount} متابع - ${price} جنيه`;
      showPage('paymentPage');
    }

    async function submitOrder(){
      const username=document.getElementById('username').value;
      const phone=document.getElementById('phone').value;
      const receipt=document.getElementById('receipt').files[0];
      if(!username||!phone||!receipt){alert('املأ كل الحقول');return;}
      try{
        await db.collection('orders').add({
          package:selectedPackage,
          username,phone,
          userId:auth.currentUser.uid,
          status:'قيد المراجعة',
          date:new Date().toLocaleDateString('ar-EG'),
          timestamp:firebase.firestore.FieldValue.serverTimestamp()
        });
        alert('تم إرسال الطلب');
        showPage('ordersPage');
      }catch(e){alert('خطأ: '+e.message);}
    }

    async function loadOrders(){
      const ordersList=document.getElementById('ordersList');
      if(!auth.currentUser){ordersList.innerHTML='<p>سجل دخول لعرض طلباتك</p>';return;}
      const snapshot=await db.collection('orders').where('userId','==',auth.currentUser.uid).orderBy('timestamp','desc').get();
      if(snapshot.empty){ordersList.innerHTML='<p>لا توجد طلبات</p>';return;}
      let html='';snapshot.forEach(doc=>{
        const o=doc.data();
        html+=`<div class="order-item"><strong>${o.package.amount} متابع - ${o.package.price} جنيه</strong><br><span>${o.status}</span></div>`;
      });
      ordersList.innerHTML=html;
    }

    async function loginUser(){
      const email=document.getElementById('loginEmail').value;
      const pass=document.getElementById('loginPassword').value;
      try{
        await auth.signInWithEmailAndPassword(email,pass);
        alert('تم تسجيل الدخول');
        showPage('homePage');
      }catch(e){alert('خطأ: '+e.message);}
    }

    function logoutUser(){
      auth.signOut();
    }

    auth.onAuthStateChanged(user=>{
      if(user){
        document.getElementById('loginNav').style.display='none';
        document.getElementById('logoutNav').style.display='inline';
      }else{
        document.getElementById('loginNav').style.display='inline';
        document.getElementById('logoutNav').style.display='none';
        showPage('loginPage');
      }
    });
  </script>
</body>
</html>
