<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Roma Shop</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>

  <style>
    body {
      margin: 0;
      font-family: 'Cairo', sans-serif;
      background: linear-gradient(to right, #6a11cb, #2575fc);
      min-height: 100vh;
      display: flex; justify-content: center; align-items: center;
    }
    .container {
      background: #fff;
      border-radius: 16px;
      padding: 20px;
      max-width: 1100px;
      width: 95%;
      box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    }
    h1, h2 {
      text-align: center;
      margin: 10px 0;
      color: #333;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px,1fr));
      gap: 20px;
      margin-top: 20px;
    }
    .card {
      background: #f9f9ff;
      border-radius: 14px;
      text-align: center;
      padding: 20px;
      transition: 0.3s;
      border: 1px solid #eee;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .card:hover {
      transform: translateY(-6px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    }
    .card h3 {
      color: #6a11cb;
      font-size: 28px;
      margin: 5px 0;
    }
    .card p {
      margin: 8px 0;
      font-size: 16px;
      color: #555;
    }
    .card button {
      background: linear-gradient(to right, #6a11cb, #2575fc);
      color: #fff; border: none;
      padding: 12px 20px;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.3s;
      font-weight: bold;
    }
    .card button:hover { opacity: 0.9; }
    /* Modal */
    .modal {
      position: fixed; top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.6);
      display: none; align-items: center; justify-content: center;
    }
    .modal-content {
      background: #fff;
      border-radius: 14px;
      padding: 25px;
      max-width: 400px;
      width: 90%;
      text-align: center;
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    }
    .modal input, .modal button {
      width: 90%; margin: 8px 0; padding: 12px;
      border-radius: 8px; border: 1px solid #ccc;
    }
    .modal button {
      background: #6a11cb; color: #fff; border: none;
    }
    .hidden { display: none; }
  </style>
</head>
<body>
  <div class="container" id="shop-section">
    <h1>Roma Shop</h1>
    <h2>اختر الباقة المناسبة</h2>
    <div class="grid" id="packages"></div>
  </div>

  <!-- نافذة الطلب -->
  <div class="modal" id="orderModal">
    <div class="modal-content">
      <h3>إكمال الطلب</h3>
      <p>ادفع على: <b>01031090116</b></p>
      <input type="text" id="instaUser" placeholder="اسم مستخدم إنستجرام">
      <input type="text" id="phone" placeholder="رقم الموبايل">
      <input type="file" id="receipt">
      <button onclick="submitOrder()">إرسال الطلب</button>
      <button onclick="closeModal()">إغلاق</button>
    </div>
  </div>

<script>
  // Firebase Config
  const firebaseConfig = {
    apiKey: "AIzaSyCg7c0q2nKJHykS2Qpp0ldoutG_29OBYkU",
    authDomain: "romashop-62bf8.firebaseapp.com",
    projectId: "romashop-62bf8",
    storageBucket: "romashop-62bf8.appspot.com",
    messagingSenderId: "830956550573",
    appId: "1:830956550573:web:8f40bedb6d05c87eecc924"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
  const storage = firebase.storage();

  const packages = [
    {followers:50, price:10},
    {followers:100, price:20},
    {followers:250, price:45},
    {followers:500, price:85},
    {followers:1000, price:150}
  ];
  let selectedPackage = null;

  function renderPackages(){
    const div=document.getElementById("packages"); div.innerHTML="";
    packages.forEach(p=>{
      const card=document.createElement("div");
      card.className="card";
      card.innerHTML=`
        <h3>${p.followers} متابع</h3>
        <p>${p.price} جنيه</p>
        <button>اختر الباقة</button>`;
      card.querySelector("button").onclick=()=>{
        selectedPackage=p;
        document.getElementById("orderModal").style.display="flex";
      };
      div.appendChild(card);
    });
  }
  renderPackages();

  function closeModal(){document.getElementById("orderModal").style.display="none";}

  async function submitOrder(){
    const insta=document.getElementById("instaUser").value;
    const phone=document.getElementById("phone").value;
    const file=document.getElementById("receipt").files[0];
    if(!insta||!phone||!file){alert("املأ جميع البيانات");return;}

    const ref=storage.ref("receipts/"+Date.now()+"_"+file.name);
    await ref.put(file);
    const url=await ref.getDownloadURL();

    await db.collection("orders").add({
      package:selectedPackage,
      instaUser:insta, phone, receipt:url,
      status:"قيد المراجعة", createdAt:new Date()
    });
    alert("✅ تم إرسال الطلب بنجاح");
    closeModal();
  }
</script>
</body>
</html>
